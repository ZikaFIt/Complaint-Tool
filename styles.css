/* ================================
   Modern Minimal Dashboard Style
   ================================ */

@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap');

/* ---------- Color System ---------- */
:root {
  --bg:#eaf7f0;
  --bg-accent:#f3f9f5;

  --card:#ffffff;
  --card-soft:#fafafa;
  --border:#e5e7eb;
  --shadow:0 6px 18px rgba(0,0,0,.07);
  --shadow-strong:0 12px 32px rgba(0,0,0,.10);

  --text:#1f2937;
  --text-soft:#667085;
  --muted:#9ca3af;
  --head:#3e556f;

  --primary:#22c55e;
  --primary-600:#16a34a;
  --primary-100:#dcfce7;

  --mini-bg:#f8fafc;
  --mini-border:#e2e8f0;

  --header-bg:#ffffff;

  --warn:#facc15;
  --danger:#ef4444;

  --tint-data-bg:#eff6ff;    --tint-data-border:#bfdbfe;
  --tint-steps-bg:#f0fdf4;   --tint-steps-border:#bbf7d0;
  --tint-req-bg:#fffbeb;     --tint-req-border:#fde68a;

  --summary-bg:#ecfdf5;
  --summary-border:#a7f3d0;

  --r-xl:20px; --r-2xl:26px; --r-3xl:34px; --p-card:20px;

  --ring:0 0 0 3px rgba(34,197,94,.18);

  --font:"Cairo","Noto Sans Arabic","Inter","Segoe UI",Roboto,Arial,sans-serif;

  --mini-stick-top: 92px;
}

/* ---------- Themes (swatches) ---------- */
body[data-brand="mid"]{
  --primary:#10b981; --primary-600:#059669; --primary-100:#d1fae5;
  --summary-bg:#ecfdf5; --summary-border:#a7f3d0;
  --ring:0 0 0 3px rgba(16,185,129,.18);
}
body[data-brand="green"]{ --primary:#16a34a; --primary-600:#15803d; --primary-100:#dcfce7; --summary-bg:#ecfdf5; --summary-border:#bbf7d0; --ring:0 0 0 3px rgba(22,163,74,.18); }
body[data-brand="blue"]{ --primary:#14b8a6; --primary-600:#0d9488; --primary-100:#ccfbf1; --summary-bg:#ecfeff; --summary-border:#a5f3fc; --ring:0 0 0 3px rgba(20,184,166,.18); }
body[data-brand="violet"]{ --primary:#7c3aed; --primary-600:#6d28d9; --primary-100:#ede9fe; --summary-bg:#f5f3ff; --summary-border:#ddd6fe; --ring:0 0 0 3px rgba(124,58,237,.18); }
body[data-brand="peach"]{ --primary:#fb923c; --primary-600:#f97316; --primary-100:#ffedd5; --summary-bg:#fff7ed; --summary-border:#fed7aa; --ring:0 0 0 3px rgba(251,146,60,.18); }
body[data-brand="lavender"]{ --primary:#c084fc; --primary-600:#a855f7; --primary-100:#f3e8ff; --summary-bg:#f5f3ff; --summary-border:#e9d5ff; --ring:0 0 0 3px rgba(168,85,247,.18); }
body[data-brand="sand"]{ --primary:#f59e0b; --primary-600:#d97706; --primary-100:#fef3c7; --summary-bg:#fffbeb; --summary-border:#fde68a; --ring:0 0 0 3px rgba(245,158,11,.18); }
body[data-brand="orange"]{ --primary:#ea580c; --primary-600:#c2410c; --primary-100:#ffedd5; --summary-bg:#fff7ed; --summary-border:#fed7aa; --ring:0 0 0 3px rgba(234,88,12,.18); }

/* ---------- Global ---------- */
*{ box-sizing:border-box; margin:0; padding:0; }
body{
  font-family:var(--font);
  background:linear-gradient(to bottom, var(--bg), #ffffff);
  color:var(--text);
  line-height:1.55;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
  padding:20px;
}
.rtl{ direction:rtl; }

/* ===== Wider container (تكبير بسيط) ===== */
.header,.grid,.footer-prepared{ max-width:1280px; margin-inline:auto; }

/* ---------- Header ---------- */
.header{
  display:flex; align-items:center; justify-content:space-between; gap:16px;
  padding:18px 24px; background:#fff; border:1px solid var(--border);
  border-radius:26px; box-shadow:var(--shadow); margin-bottom:24px;
}
.header.sticky{ position:sticky; top:0; z-index:100; background:#C5E0B3; border-color:transparent; box-shadow:0 10px 22px rgba(0,0,0,.12); }
.header-left .prepared-left{ color:#111827; font-weight:700; font-size:.92rem; }
.header-center{ text-align:center; }
.prepared{ font-weight:800; color:var(--text); font-size:1.05rem; letter-spacing:.1px; }
.prepared.store{ color:#0f172a; font-size:1.15rem; }
.prepared.product{ color:#1f2937; font-weight:600; }
.header-tools{ display:flex; flex-direction:column; align-items:flex-end; gap:6px; }
.theme-switcher{ display:flex; gap:8px; align-items:center; }
.swatch{ width:22px; height:22px; border-radius:999px; border:2px solid #fff; box-shadow:var(--shadow); cursor:pointer; outline:none; }
.swatch:focus{ box-shadow:var(--ring); }
.swatch.green{background:#16a34a}.swatch.mid{background:#10b981}.swatch.mint{background:#14b8a6}.swatch.violet{background:#7c3aed}.swatch.peach{background:#fb923c}.swatch.lavender{background:#c084fc}.swatch.sand{background:#f59e0b}.swatch.orange{background:#ea580c}

/* ---------- Grid ---------- */
.grid{ display:grid; grid-template-columns: 1.8fr 1fr; grid-template-areas: "right left"; gap:24px; }
.col-left{  grid-area:left;  }
.col-right{ grid-area:right; }
@media (max-width:1100px){ .grid{ grid-template-columns:1fr; grid-template-areas:"right" "left"; } }
body[data-layout="normal"] .grid{ grid-template-columns:1fr 1.8fr; grid-template-areas:"left right"; }

/* ---------- Cards ---------- */
.card{ background:#fff; border:1px solid var(--border); border-radius:26px; box-shadow:var(--shadow); transition:.2s box-shadow, .2s transform; }
.card:hover{ box-shadow:var(--shadow-strong); transform:translateY(-1px); }
.p-card{ padding:20px; }
.card-title{ display:flex; align-items:center; gap:12px; font-weight:800; color:#17372a; margin:0 0 14px 0; font-size:1.02rem; letter-spacing:.1px; }
.card-title::before{ content:attr(data-ico); display:inline-flex; align-items:center; justify-content:center; width:32px; height:32px; border-radius:12px; background:var(--primary-100); color:#16a34a; font-size:16px; }
.accent-line{ height:4px; border-radius:999px; background:var(--primary-600); opacity:.85; margin:4px 0 12px; }

/* Badge */
.badge{ display:inline-flex; align-items:center; gap:6px; padding:4px 10px; border-radius:999px; font-size:.78rem; font-weight:700; border:1px solid transparent; }
.badge-req{ background:var(--tint-req-bg); color:#92400e; border-color:var(--tint-req-border); }

/* ---------- Inputs ---------- */
.form-grid{ display:grid; grid-template-columns:1fr 1fr; gap:18px; }
@media (max-width:900px){ .form-grid{ grid-template-columns:1fr; } }
.form-field{ display:flex; flex-direction:column; gap:6px; }
.label{ font-size:.92rem; color:#17372a; font-weight:800; letter-spacing:.15px; }
input[type="text"], textarea{ width:100%; padding:12px 14px; border-radius:12px; border:1px solid var(--border); background:#fff; color:#1f2937; transition:.2s border-color,.2s box-shadow; }
input::placeholder, textarea::placeholder{ color:var(--muted); }
input:focus, textarea:focus{ border-color:var(--primary); box-shadow:var(--ring); }

/* ملاحظات أخرى بلون مميز */
.note-field{
  background:#fff7ed;
  border-color:#fdba74;
}
.note-field:focus{
  border-color:#f59e0b;
  box-shadow:0 0 0 3px rgba(245,158,11,.18);
}

/* ---------- Q blocks ---------- */
.q-block{ background:var(--card-soft); border:1px dashed var(--border); border-radius:14px; padding:14px; margin:12px 0; }
.q-title{ font-weight:700; color:#17372a; margin-bottom:10px; font-size:.98rem; }

/* اختيارات الأسئلة (راديو) */
.inline-options{ display:flex; flex-wrap:wrap; gap:10px; }
.inline-options label{
  position:relative; display:inline-flex; align-items:center; gap:8px; padding:10px 16px;
  border:1px solid var(--border); border-radius:12px; background:#fff; cursor:pointer;
  font-size:.95rem; font-weight:700; color:#1f2937; transition:.2s, transform .12s ease;
}
.inline-options label:hover{ transform:translateY(-1px); }
.inline-options input[type="radio"]{ position:absolute; opacity:0; inset:0; width:100%; height:100%; cursor:pointer; }
.inline-options label:has(input[type="radio"]:checked){
  background:var(--primary-100); color:#16a34a; border-color:var(--summary-border); box-shadow:var(--ring);
}
.inline-options label:has(input[type="radio"]:checked)::after{ content:"✓"; font-weight:800; margin-inline-start:6px; }

/* ---------- Case grid ---------- */
.case-grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(170px,1fr)); gap:14px; }
.case, .case-btn{
  background:#fff; border:1px solid var(--border); border-radius:16px; padding:14px; text-align:center;
  font-weight:800; color:#1f2937; font-size:.85rem; cursor:pointer; transition:.2s, transform .12s ease;
}
.case:hover, .case-btn:hover{ transform:translateY(-2px); box-shadow:var(--shadow); }
.case.active, .case-btn.active{ border-color:var(--primary); background:var(--primary-100); color:#16a34a; }
.case-btn{ appearance:none; }
.case-btn:focus{ outline:none; box-shadow:var(--ring); }

/* ---------- Summary (المطلوب) ---------- */
#summary{ min-height:100px; background:var(--tint-req-bg); border:1px solid var(--tint-req-border); border-radius:20px; padding:14px; }
#summary .result{ background:#fff; border:1px dashed var(--tint-req-border); border-radius:10px; padding:10px; margin:6px 0; font-size:.92rem; color:#1f2937; }

/* ---------- Mini Summary (الخلاصة) ---------- */
#miniSummary{ font-size:.92rem; color:#111827; background:var(--summary-bg); border:1px solid var(--summary-border); border-radius:26px; padding:14px 16px; }
#miniSummary .mini-title{ font-weight:800; color:#16a34a; margin-bottom:8px; }
#miniSummary .mini-section{ border-radius:12px; padding:12px 14px; margin:10px 0; border:1px solid transparent; background:transparent; }
#miniSummary .mini-section.is-data{ background:var(--tint-data-bg); border-color:var(--tint-data-border); }
#miniSummary .mini-section.is-steps{ background:var(--tint-steps-bg); border-color:var(--tint-steps-border); }
#miniSummary .mini-section.is-req{ background:var(--tint-req-bg); border-color:var(--tint-req-border); }
#miniSummary ul{ margin:6px 0 0; padding-inline-start:18px; }
#miniSummary li::marker{ color:var(--primary-600); }

/* Sticky */
.mini-sticky{ position:sticky; top: var(--mini-stick-top); z-index: 30; }

/* ---------- Segmented + أزرار ---------- */
.segmented{ display:inline-flex; flex-wrap:wrap; gap:8px; }
.seg{ display:inline-flex; align-items:center; padding:8px 14px; border:1px solid var(--border); border-radius:999px; font-size:.92rem; font-weight:800; color:#667085; cursor:pointer; background:#fff; transition:.2s; }
.seg:hover{ background:var(--primary-100); color:#16a34a; }
.seg input{ display:none; }
.seg input:checked + span{ background:var(--primary); color:#fff; border-radius:999px; padding:8px 14px; }

#copyMiniBtn{ background:var(--primary); color:#fff; border:none; border-radius:12px; padding:10px 14px; box-shadow:var(--shadow); font-weight:800; }
#copyMiniBtn:hover{ background:#15803d; }
#endBtn{ background:#ef4444; color:#fff; border:none; border-radius:12px; padding:10px 14px; box-shadow:var(--shadow); font-weight:800; }
#endBtn:hover{ filter:brightness(.95); }
#saveDraftBtn{ background:#065f46; color:#fff; border:none; border-radius:12px; padding:10px 14px; box-shadow:var(--shadow); font-weight:800; }
#saveDraftBtn:hover{ filter:brightness(.95); }

/* ---------- Thin progress ---------- */
.thin-progress{ margin:0 0 10px 0; height:8px; background:#e5e7eb; border-radius:999px; overflow:hidden; }
.thin-progress .bar{ height:100%; background:var(--primary); border-radius:999px; width:0%; transition:width .2s ease; }

/* ---------- Utilities ---------- */
.hint{ color:#667085; font-size:.85rem; }
.row{ display:flex; gap:14px; align-items:flex-start; }
.mt8{ margin-top:8px; } .mt12{ margin-top:12px; } .mt16{ margin-top:16px; }
#qaCard{ padding:18px; } #questions{ margin-top:8px; } .q-after-grid{ margin-top:10px; }

/* ---------- Footer ---------- */
.footer-prepared{ text-align:center; color:#9ca3af; font-size:.85rem; font-weight:600; }

/* ===== Toast + Invalid fields ===== */
.toast{ position:fixed; bottom:24px; left:50%; transform:translateX(-50%); background:#fff; color:#111827; border:1px solid var(--border); border-radius:14px; padding:12px 16px; box-shadow:0 12px 32px rgba(0,0,0,.10); z-index:9999; max-width:90vw; font-weight:800; }
.toast-error{ background:#fef2f2; border-color:#fecaca; color:#991b1b; }
.toast-success{ background:#ecfdf5; border-color:#a7f3d0; color:#065f46; }
input.invalid{ border-color:#ef4444 !important; box-shadow:0 0 0 3px rgba(239,68,68,.15) !important; }

/* تصغير الالتصاق على الموبايل */
@media (max-width:1100px){ :root{ --mini-stick-top: 78px; } }

/* =======================
   Drafts Sidebar
   ======================= */
.drafts{ position:fixed; inset-block:0; left:0; width:280px; background:#fff; border-inline-end:1px solid var(--border); box-shadow:0 6px 24px rgba(0,0,0,.08); padding:10px 10px 12px; z-index:1000; transition:transform .22s ease; }
.drafts.collapsed{ transform:translateX(calc(-100% + 44px)); }
.drafts .drafts-header{ display:flex; align-items:center; gap:8px; margin-bottom:8px; }
.drafts .toggle{ border:none; background:#f3f4f6; width:32px; height:32px; border-radius:10px; cursor:pointer; font-weight:900; transform:rotate(180deg); transition:transform .22s ease; }
.drafts.collapsed .toggle{ transform:rotate(0deg); }
.drafts .title{ font-weight:800; font-size:.95rem; color:#0f172a; }
.drafts .search{ margin-inline-start:auto; width:140px; max-width:160px; height:30px; padding:0 10px; border:1px solid var(--border); border-radius:10px; font-size:.85rem; }
.drafts-list{ list-style:none; display:flex; flex-direction:column; gap:8px; max-height:calc(100vh - 86px); overflow:auto; padding-inline:2px; }
.draft-item{ border:1px solid var(--border); border-radius:12px; padding:10px 10px 6px; background:#fff; }
.draft-top{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.draft-link{ color:#065f46; font-weight:800; text-decoration:none; cursor:pointer; }
.draft-meta{ font-size:.78rem; color:#6b7280; }
.draft-actions{ margin-top:6px; display:flex; gap:8px; justify-content:flex-end; }
.draft-del{ background:#fee2e2; color:#991b1b; border:1px solid #fecaca; border-radius:10px; padding:4px 10px; font-weight:800; cursor:pointer; }
.draft-empty{ color:#6b7280; background:#f9fafb; border:1px dashed var(--border); padding:12px; border-radius:12px; text-align:center; font-weight:700; }
/* === توحيد مظهر الحقول === */
.form-grid input[type="text"],
.form-grid input[type="tel"],
.form-grid input[type="number"],
.form-grid select,
.note-field {
  height: 42px;
  padding: 10px 12px;
  border: 1px solid var(--field-border, #cbd5e1);
  border-radius: 12px;
  background: #fff;
  outline: none;
  box-shadow: none;
  font: inherit;
}

/* الحقول المعطّلة (Auto) */
.form-grid input:disabled {
  background: #f6faf7;        /* قريب من شكل Sub Category */
  color: #0f3d2e;
  opacity: 1;                  /* ما تبقاش باهتة */
  cursor: default;
}

/* إزالة أسهم الأرقام المنفرة */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
input[type="number"] { -moz-appearance: textfield; }

/* إظهار سهم الـselect الافتراضي */
.form-grid select {
  appearance: auto !important;   /* مهم علشان يظهر السهم */
  background-image: none;         /* من غير سهم مخصص قديم */
}

/* تمييز الحقول الناقصة */
.invalid,
.inline-options .invalid {
  border-color: #d9534f !important;
  box-shadow: 0 0 0 2px rgba(217,83,79,.15);
}